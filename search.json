[
  {
    "objectID": "notebooks/accounts_dashboard.html",
    "href": "notebooks/accounts_dashboard.html",
    "title": "Starknet Accounts Dashboard",
    "section": "",
    "text": "Source code using Checkpoint as indexer to get Starknet data"
  },
  {
    "objectID": "notebooks/accounts_dashboard.html#querysaveload-data",
    "href": "notebooks/accounts_dashboard.html#querysaveload-data",
    "title": "Starknet Accounts Dashboard",
    "section": "Query/save/load data",
    "text": "Query/save/load data\n\n\nCode\nimport pandas as pd\nimport json\nfrom tabulate import tabulate\nfrom utils.query import query_account_creates, query_account_upgrades\n# Query and save data\n# query_account_creates()\n# query_account_upgrades()\n\n# Load data\nwith open(f'data/account_creates_up_to_block_38792.json') as f:\n    creates_data = json.load(f)\ncreates_data_df = pd.DataFrame(creates_data['account_creates']).drop_duplicates(subset=['id']).reset_index(drop=True)\ncreates_data_df['datetime'] = pd.to_datetime(creates_data_df['created_at'], unit='s')\n\nprint(\"Account creates table (first 5 rows):\")\nprint(tabulate(creates_data_df.head(5), headers='keys', tablefmt='psql'))\nprint(f'Shape: {creates_data_df.shape}')\nprint('\\n\\n')\n\n# ####\nwith open(f'data/account_upgrades_up_to_block_38787.json') as f:\n    upgrades_data = json.load(f)\nupgrades_data_df = pd.DataFrame(upgrades_data['account_upgrades']).drop_duplicates(subset=['id']).reset_index(drop=True)\nupgrades_data_df['datetime'] = pd.to_datetime(upgrades_data_df['created_at'], unit='s')\nprint(\"Account upgrades table (first 5 rows):\")\nprint(tabulate(upgrades_data_df.head(5), headers='keys', tablefmt='psql'))\nprint(f'Shape: {upgrades_data_df.shape}')\n\n# datetime are in GMT\n\n\nAccount creates table (first 5 rows):\n+----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+---------------------+\n|    | id                                                                | from_address                                                      |   created_at |   created_at_block | datetime            |\n|----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+---------------------|\n|  0 | 0x2b5f4af6bc5cfb032c83baef17ca99ee46f2d60997d5ad78d75efefa9617139 | 0x2a7f765dc8a9030e3ec393f51d5b0244a21ae55b71485f1142474b3c254537e |   1655372577 |               2710 | 2022-06-16 09:42:57 |\n|  1 | 0x3ef53cf0fbad0edde37c1ee24ebc57433f39728dcaa9dfb2d2b365d3f9e8e6b | 0x179b1211aed20097bbba0369088db3d30ece0550015c08ea7e521bba99e76d2 |   1655380283 |               2711 | 2022-06-16 11:51:23 |\n|  2 | 0x5f733c678cdcf3600e623c82be5fc773c487f361f164cd07c9bb8af24f5631a | 0x623efd6c07c219834db614400804e244b1cadfb6016cac45babd738b5c9d37a |   1655390756 |               2713 | 2022-06-16 14:45:56 |\n|  3 | 0x6e884ba9506e4729858852c7097d6e741a8e4f5508cab4da2141d9f974672ec | 0x2f9aa38ee23fba8b283af247c603b05b2eaa160d68aa5a35cd9e02a2d0aafd3 |   1655397921 |               2714 | 2022-06-16 16:45:21 |\n|  4 | 0x2d895f0a23171d5a008072c74b8169938e19834870d47b270f5a740aa008ed2 | 0x35cc2db92bd5f244ccee2afcf14a9bca0ec5243f0b093a9d2b639eeea4be936 |   1655405163 |               2715 | 2022-06-16 18:46:03 |\n+----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+---------------------+\nShape: (481891, 5)\n\n\n\nAccount upgrades table (first 5 rows):\n+----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+-------------------------------------------------------------------+---------------------+\n|    | id                                                                | from_address                                                      |   created_at |   created_at_block | implementation                                                    | datetime            |\n|----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+-------------------------------------------------------------------+---------------------|\n|  0 | 0x124ccb5b22d5cd751008d2d1dca3bb9f1c145f694adadc39d589aa73a5020ea | 0x655d962eb3986f736caf9c27b425595855012b85afb0e4f57d39421d2f6f878 |   1650593011 |               1841 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac | 2022-04-22 02:03:31 |\n|  1 | 0x1b18b3290be8554ffd6e2460c386373ae8ab5d4b5be0710c0510a1e0078358  | 0x2ec7ac67d306407f0c2a0a367e7ba13ba53197d415587418eae1c62cb6e424b |   1650639147 |               1847 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac | 2022-04-22 14:52:27 |\n|  2 | 0x2314a266427aa7705d6ebaadb08b0b0c3adc4a8131d9cbc21cbdcda40db7cd8 | 0x4944d439be5d7250e7691b9d399d7f996370256fac20b8365f8ed16a4b9051a |   1650639147 |               1847 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac | 2022-04-22 14:52:27 |\n|  3 | 0x459be971b14ec5de49d93d2456ac30aa2d8997c936d1ca48aa59ef2cdd16b97 | 0x15aef0dd2b763c16008e6f5bf7ddd73dc40c8cec49722735115751431edd115 |   1650639147 |               1847 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac | 2022-04-22 14:52:27 |\n|  4 | 0x6954966b18946916cc40c43be79370dfadfe4079ffa4a957226d222e95ac66e | 0xe916eda2b5c226f6994c74a9fa05f6f0971672e913988841649062219ffe60  |   1650639147 |               1847 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac | 2022-04-22 14:52:27 |\n+----+-------------------------------------------------------------------+-------------------------------------------------------------------+--------------+--------------------+-------------------------------------------------------------------+---------------------+\nShape: (86852, 6)"
  },
  {
    "objectID": "notebooks/accounts_dashboard.html#analysis",
    "href": "notebooks/accounts_dashboard.html#analysis",
    "title": "Starknet Accounts Dashboard",
    "section": "Analysis",
    "text": "Analysis\n\n# Just to make sure all the addresses that send `create_account` transactions are unique\ncreates_data_df['from_address'].unique().shape[0] == creates_data_df.shape[0]\n\nTrue\n\n\n\nEvents count by day\nThis tells a lot about when users are interested in getting into the network.\n\n\nCode\nimport plotly.graph_objects as go\nimport plotly.io as pio\npio.renderers.default = \"plotly_mimetype+notebook\"\n\nfig = go.Figure()\n\ns = creates_data_df['datetime']\ndf = s.groupby(s.dt.floor('d')).size().reset_index(name='count')\nfig.add_trace(go.Scatter(x=df['datetime'], y=df['count'],\n                    mode='markers',\n                    name='account_created'))\n\ns = upgrades_data_df['datetime']\ndf = s.groupby(s.dt.floor('d')).size().reset_index(name='count')\nfig.add_trace(go.Scatter(x=df['datetime'], y=df['count'],\n                     mode='markers',\n                     name='account_upgraded'))\n\n# Edit the layout\nfig.update_layout(title='Daily number of events',\n                   xaxis_title='Day',\n                   autosize=True,\n    )\n# fig.add_vline(x='2023-03-23', annotation_text='ARB', line_width=2, line_dash=\"dash\", line_color=\"green\")\nfig.add_vrect(x0=\"2023-03-22\", x1=\"2023-03-24\", row=\"all\", col=1,\n              annotation_text=\"ARB airdrop\", annotation_position=\"top right\",\n              fillcolor=\"green\", opacity=0.25, line_width=0)\n\nfig.show()\n\n\n\n                                                \n\n\n\n\nAround the clock\nNot much information, just when (most) users sleep.\n\n\nCode\nfig = go.Figure()\n\ns = creates_data_df['datetime']\ndf = s.groupby(s.dt.floor('h')).size().reset_index(name='count')\n_df = df.groupby([df['datetime'].dt.hour])['count'].sum().reset_index(name='count')\nfig.add_trace(go.Bar(x=_df['datetime'], y=_df['count'], name='account_created'))\n\ns = upgrades_data_df['datetime']\ndf = s.groupby(s.dt.floor('h')).size().reset_index(name='count')\n_df = df.groupby([df['datetime'].dt.hour])['count'].sum().reset_index(name='count')\nfig.add_trace(go.Bar(x=_df['datetime'], y=_df['count'], name='account_upgraded'))\n\nfig.update_layout(title='Number of events around the clock',\n                   xaxis_title='Hour (UTC)',\n                   autosize=True,\n    )\nfig.show()\n\n\n\n                                                \n\n\n\n\nAccount implementations\nOr contract class which is used by the account. - This is not the whole picture, as account_created event does not contain the implementation. - But by far ArgentAccount is the most implementation that accounts are upgraded to.\n\n_df = upgrades_data_df['implementation'].value_counts().rename_axis('implementation').reset_index(name='counts')\nprint(tabulate(_df, headers='keys', tablefmt='psql'))\n\n+----+-------------------------------------------------------------------+----------+\n|    | implementation                                                    |   counts |\n|----+-------------------------------------------------------------------+----------|\n|  0 | 0x33434ad846cdd5f23eb73ff09fe6fddd568284a0fb7d1be20ee482f044dabe2 |    72987 |\n|  1 | 0x1a7820094feaf82d53f53f214b81292d717e7bb9a92bb2488092cd306f3993f |    11331 |\n|  2 | 0x1bd7ca87f139693e6681be2042194cf631c4e8d77027bf0ea9e6d55fc6018ac |     2225 |\n|  3 | 0x69577e6756a99b584b5d1ce8e60650ae33b6e2b13541783458268f07da6b38a |      295 |\n|  4 | 0x25319262b1256b464b0a7b7678fc3fa1519015cee5a559a22dfa3e52bdef2a8 |        1 |\n|  5 | 0x4507edaf81d13231eddb027922a7d535a5c0bd647d953b7f2fa84926d659ec9 |        1 |\n|  6 | 0x41e620242076112068698358a60b4f55ba647191663e05eff434a8c84e63cab |        1 |\n|  7 | 0x1ce9e67ecfbe0d645db2425ba00bcef7c29a73d87e74d3d96bfaffc237be1ec |        1 |\n|  8 | 0x7c3a28432b38cdc92f2d897227d2a125857edbf2c3d4b74831eac6c49f2dba5 |        1 |\n|  9 | 0x47bde3fe273d58d782a9fcd5c8a9a9ecace9e4179c92353fd038c31df534482 |        1 |\n| 10 | 0x17ac03837c4d31e6786ca44a980352f4ebe679424a09b0516d79a80acf6aa03 |        1 |\n| 11 | 0x360d811605f73d73bf087754350e4b11f665adb835e90c539f67fac9b74fce6 |        1 |\n| 12 | 0x32c7141696f6536aa787d226b9c08b825b52e0ef0cfbbbe67fdaa2888764bf  |        1 |\n| 13 | 0x6acbc95b857d045ff826ad3f499b1f914b761a2252c9228da75bcddb448ca52 |        1 |\n| 14 | 0x5c67e1ea8a33b2699a8364f0b0bd5b30bb08b2a41af6e962f8d5f43ce8ed33e |        1 |\n| 15 | 0x3916c2ed1867662565655d663be0067dcdc12439bc861b5e1c67e4dd1d363ae |        1 |\n| 16 | 0x6c22f0ff97bd44e14bbd1414436b92faa7cfaa037fd0c94808d425a6cc9be52 |        1 |\n| 17 | 0x709978effc9994981c22c4bcc504b965cea36cfb8454c49026b2fead96e0f3  |        1 |\n+----+-------------------------------------------------------------------+----------+"
  }
]